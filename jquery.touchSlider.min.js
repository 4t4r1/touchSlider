(function(a){a.fn.reverse=[].reverse;a.fn.touchSlider=function(b){var b=a.extend({item:"div.item",holder:"div.holder",box:"div.list",debug:false,mode:"shift",shift:"80%",delta:40,single:false,center:false,animation:"auto",touch:true,duration:500,prevLink:null,nextLink:null,onChange:null,onStart:null,onCheckItems:null,lockScroll:false,hideClass:"mt-hidden",activeClass:"active"},b);this.each(function(){var s=jQuery(this);if(b.debug){a("body").append('<div id="console"></div>')}var H=[{start:"mousedown",end:"mouseup",move:"mousemove",leave:"mouseout"},{start:"touchstart",end:"touchend",move:"touchmove",leave:"touchend"}];var P="ontouchend" in document?1:0;var B=a(b.item,this);if(!B.length){return}var Y=a(b.holder,this).first();if(!Y.length){return}var n=a(b.box,this).first();if(!n.length){return}var x=false;if(b.animation&&b.animation!="js"){var E=document.body||document.documentElement;var V=E.style;var aa=(V.WebkitTransition!==undefined)?"webkitTransitionEnd":"transitionend";x=V.WebkitTransition!==undefined||V.MozTransition!==undefined||V.transition!==undefined;if(x&&b.animation=="auto"){F("Detected Transitions Support","");n.css({"-webkit-transition-property":"-webkit-transform","-webkit-transition-timing-function":"ease","-moz-transition-property":"-moz-transform","-moz-transition-timing-function":"ease","transition-property":"transform","transition-timing-function":"ease"});n.unbind(aa);n.bind(aa,L)}var S=("WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix());if(S){F("Detected 3D Support","")}}var h=null;var e=null;var d=0;var R=[];var u=0;var ab=null;var v=null;var W=0;var t=false;l(0);I(0);if(b.touch){n.bind(H[P]["start"],this,o);n.bind(H[P]["end"],this,o);n.bind(H[P]["leave"],this,o);n.bind(H[P]["move"],this,o)}if(b.prevLink){a(b.prevLink,s).bind("click",function(){s.get(0).movePrev();return false})}if(b.nextLink){a(b.nextLink,s).bind("click",function(){s.get(0).moveNext();return false})}a(window).bind("onorientationchange" in window?"orientationchange":"resize",this,k);a(window).bind("load",this,k);function k(){setTimeout(g,200)}var J=false;var D=0;var c=Y.width();F("Current width:",c);this.getCount=function(){return b.mode=="auto"?R.length:a(B).length};this.moveNext=function(){switch(b.mode){case"index":y();break;case"shift":j();break;case"auto":w();break}};this.movePrev=function(){switch(b.mode){case"index":r();break;case"shift":M();break;case"auto":p();break}};this.moveTo=function(ad){switch(b.mode){case"index":T(ad);break}};this.refresh=function(){g()};g(true);function g(ad){c=Y.width();W=0;var ad=typeof(ad)=="undefined"?false:ad;if(ad&&a.isFunction(b.onStart)){b.onStart()}switch(b.mode){case"index":if(b.single){var ae=0;if(ad){K()}else{a(B[h]).css("width",c);setTimeout(C,100)}Z()}else{if(b.center){Z()}}break;case"shift":X();break;case"auto":R=[];if(b.single){i()}ac("both");B.each(function(ah,ai){var ag=this.offsetWidth;var af=R.length;if(ah==0){if(ag>c){R.push([ag,new Array(new Array(ah,ag)),0])}else{R.push([ag,new Array(new Array(ah,ag))])}G(ah)}else{if(R[af-1][0]+ag<=c){R[af-1][0]+=ag;R[af-1][1].push(new Array(ah,ag));G(ah)}else{if(ag>c){R.push([ag,new Array(new Array(ah,ag)),0])}else{R.push([ag,new Array(new Array(ah,ag))])}G(ah)}}});if(h>=R.length){l(R.length-1)}if(b.single){O()}if(a.isFunction(b.onCheckItems)){b.onCheckItems()}m();break}}function i(){a(B).css("width","")}function G(ad){if(ad==d){l(R.length-1)}}function K(){a.each(B,function(){a(this).css("width","");var ad=a(this).width();if(ad<c){a(this).css("width",c)}})}function O(){a.each(R,function(ad,ae){if(ae[0]<c){var af=ae[0];ae[0]=c;a(ae[1]).each(function(ag,ah){ah[1]=parseInt(c*ah[1]/af);a(B[ah[0]]).css("width",ah[1])})}})}function C(){K();Z(true)}function o(ad){var ae=(P)?ad.originalEvent.touches[0]:ad;switch(ad.type){case H[P]["move"]:q(ad,ae);break;case H[P]["start"]:U(ad,ae);break;case H[P]["end"]:case H[P]["leave"]:A(ad);break}}function q(ad,ae){if(J){if(b.lockScroll&&ad.type!="click"){ad.preventDefault()}W=D-ae.pageX;if(W!=0){f(e-W,true)}}}function U(ad,ae){if(!J){t=false;F("Touch Start");J=true;W=0;D=(P)?ae.pageX:ad.clientX}}function A(ad,ae){if(J){F("Touch End");J=false;D=0;if(W!=0){if(W>b.delta||W<(0-b.delta)){N()}else{f(e)}}}W=0}function N(){switch(b.mode){case"shift":X();break;case"index":Z();break;case"auto":m();break}}function Z(ad){var ag=0;var af=0;a.each(B,function(ah){if(ah<h){af+=this.offsetWidth}ag+=this.offsetWidth});if(ag<=c){z("both");return}else{ac("both")}var ae=0;if(W>0){if(b.center){ae=0-(af+a(B[h]).width()+a(B[h+1]).width()/2)+c/2;if(h<B.length-1){l(h+1);I(ae);f(e)}else{f(e)}}else{ae=0-(af+a(B[h]).width());if(ag+ae>c){l(h+1);I(ae);f(e)}else{l(B.length-1);I(0-(ag-c));f(e)}}}else{if(W<0){if(b.center){ae=0-(af-a(B[h-1]).width()/2)+c/2;if(h>0){l(h-1);I(ae);f(e)}else{f(e)}}else{ae=0-(af-a(B[h]).width());if(ae<0){l(h-1);I(ae);f(e)}else{l(0);I(0);f(e)}}}else{if(b.center){ae=0-(af+a(B[h]).width()/2)+c/2;I(ae);if(typeof(ad)=="undefined"){f(e)}else{f(e,true)}}else{ae=0-af;I(ae);if(typeof(ad)=="undefined"){f(e)}else{f(e,true)}}}}}function m(){var ah=0;var ag=0;var ad=Y.width();a.each(R,function(ai){if(ai<h){ag+=this[0]}ah+=this[0]});var af=R[h].length>2?true:false;if(ah<=ad){z("both")}else{ac("both")}if(b.center&&ah<ad){ae=ad/2-ah/2;I(ae);f(e);return}var ae=0;if(W>0){if(h<R.length-1||(h>=R.length-1&&af)){if(af&&R[h][0]-ad>R[h][2]){R[h][2]+=ad;if(R[h][0]-R[h][2]>ad){I(e-ad);f(e)}else{I(e-(R[h][0]-R[h][2]));R[h][2]+=R[h][0]-R[h][2];R[h][2]-=ad;f(e)}}else{if(typeof(R[h+1])!="undefined"){if(R[h+1].length>2){ae=0-(ag+R[h][0])}else{ae=0-(ag+R[h][0]+R[h+1][0]/2)+ad/2}if(ah+ae>ad){l(h+1);I(ae);f(e)}else{l(R.length-1);I(0-(ah-ad));f(e)}}else{f(e)}}}else{f(e)}}else{if(W<0){if(h>0||(h<=0&&af)){if(af&&R[h][2]>0){R[h][2]-=ad;if(R[h][2]>=0){I(e+ad);f(e)}else{I(e+(R[h][2]+ad));R[h][2]=0;f(e)}}else{if(typeof(R[h-1])!="undefined"){if(R[h-1].length>2){ae=0-(ag-ad);R[h-1][2]=R[h-1][0]-ad}else{ae=0-(ag-R[h-1][0]/2)+ad/2}if(ae<0){l(h-1);I(ae);f(e)}else{l(0);I(0);f(e)}}else{f(e)}}}else{f(e)}}else{if(af){ae=0-ag}else{ae=0-(ag+R[h][0]/2)+ad/2}if(ae>=0){I(0);f(e)}else{if(ah+ae<=ad){I(0-(ah-ad));f(e)}else{I(ae);f(e)}}}}}function z(ad){switch(ad){case"both":if(b.prevLink){a(b.prevLink,s).addClass(b.hideClass)}if(b.nextLink){a(b.nextLink,s).addClass(b.hideClass)}break;case"prev":if(b.prevLink){a(b.prevLink,s).addClass(b.hideClass)}break;case"next":if(b.nextLink){a(b.nextLink,s).addClass(b.hideClass)}break}c=Y.width()}function ac(ad){switch(ad){case"both":if(b.prevLink){a(b.prevLink,s).removeClass(b.hideClass)}if(b.nextLink){a(b.nextLink,s).removeClass(b.hideClass)}break;case"prev":if(b.prevLink){a(b.prevLink,s).removeClass(b.hideClass)}break;case"next":if(b.nextLink){a(b.nextLink,s).removeClass(b.hideClass)}break}c=Y.width()}function X(){var af=0;a.each(B,function(){af+=this.offsetWidth});if(af<c&&!b.center){return}var ad=b.shift+"";var ae=0;if(ad.indexOf("%")!=-1){ad=parseInt(c*b.shift.substr(0,b.shift.length-1)/100)}else{ad=parseInt(b.shift)}if(b.center&&af<c){ae=c/2-af/2;I(ae);f(e)}else{if(W>0){ae=e-ad;if(af+ae>c){I(ae);f(e)}else{I(0-(af-c));f(e)}}else{ae=e+ad;if(ae<0){I(ae);f(e)}else{I(0);f(e)}}}}function j(){W=1;X()}function M(){W=-1;X()}function F(af,ae){if(typeof(ae)=="undefined"){ae=""}if(b.debug){var ad=new Date();a("#console").prepend('<div class="debug-item"><strong>'+ad.getMinutes()+":"+ad.getSeconds()+"."+ad.getMilliseconds()+"</strong> "+af+" "+ae+"</div>")}}function l(ad){if(ad!=h){t=true;ab=h;h=ad;if(b.mode=="auto"&&R.length){d=R[h][1][0][0]}else{a(B).removeClass(b.activeClass);a(B[h]).addClass(b.activeClass)}F("Setting up current index:",ad)}else{t=true}}function I(ad){ad=parseInt(ad,10);if(ad!=e){v=e;e=ad;F("Setting current offset:",ad)}}function T(ad){if(typeof(B[ad])!="undefined"){l(parseInt(ad));W=0;Z()}}function y(){W=1;Z()}function r(){W=-1;Z()}function w(){W=1;m()}function p(){W=-1;m()}function f(ag,ae){var ad=typeof(ae)=="undefined"?b.duration:0;if(typeof(ae)=="undefined"&&a.isFunction(b.onChange)&&t){b.onChange(ab,h)}if(!b.animation){if(ad){Q();n.css({"margin-left":ag+"px"});L()}}else{Q();var af=typeof(ae)=="undefined"?b.duration/1000+"s":"0";if(x){n.css({"-webkit-transition-duration":af,"-moz-transition-duration":af,"transition-duration":af});if(S){F("CSS 3D Transition To:",ag);n.css({"-webkit-transform":"translate3d("+ag+"px,0,0)",transform:"translate3d("+ag+"px,0,0)"})}else{F("CSS Transition To:",ag);n.css({"-webkit-transform":"translate("+ag+"px,0)","-moz-transform":"translate("+ag+"px,0)",transform:"translate("+ag+"px,0)"})}}else{F("jQuery Animate To:",ag);n.animate({"margin-left":ag+"px"},{queue:false,duration:ad,easing:"swing",complete:L})}}}function Q(){n.addClass("moving");F("Animation start","")}function L(){n.removeClass("moving");F("Animation end","")}});return this}})(jQuery);